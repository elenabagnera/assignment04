---
title: "assignment04<eb1238>"
author: "Elena Bagnera"
date: "10/3/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(haven)
library(ggplot2)
library(ggrepel)
```

## Fiscal decentralization across countries

```{r loading imfdata}
imf_fd <- read_dta('Data/Fiscal Decentralization STATA File - 2020 GFS Database Vintage (2).dta') 

```

```{r imfcleaning_graph1}
imf_fd_graph1 <- imf_fd %>%
  filter(year==2019) %>%
  select(country, sd_sng, rd_sng) %>%
  filter(country== "United States" | country== "Canada" |country== "New Zealand" | country=="Australia")
```

```{r imfgraph1}

imf_fd_graph1 %>% ## alternatively can take mean across years and do more countries using facet?
  ggplot() +
geom_col(mapping = aes(x = country, y = sd_sng, fill=country), position="dodge")+
  theme_classic() + 
  xlab("Countries") + 
  labs(caption="The data comes from the IMF subnational finance database") +
  labs(title = "Comparison of tax revenue and expenditure decentralisation in 4 countries", subtitle="2019", fill="")
  
```

## Tax autonomy in OECD countries - or Spain over time?

```{r imfcleaning_graph2}
imf_fd_graph2 <- imf_fd %>%
  filter(country=="Spain") %>%
  filter(year>=1980) %>%
  select(country, year, sd_sng, rd_sng, taxd_sng) 
```


```{r imfgraph2}

imf_fd_graph2 %>% 
  ggplot() +
geom_line(mapping = aes(x = year, y = sd_sng), color="blue")+
  geom_line(mapping = aes(x = year, y = rd_sng), color="dark green")+
    geom_line(mapping = aes(x = year, y = taxd_sng), color="red")+
  theme_classic() + 
  xlab("Years") + 
  ylab("Types of decentralization") +
  labs(caption="The data comes from the IMF subnational finance database") +
  labs(title = "Decentralization trends in Spain over time", subtitle="from 1980 to 2019", fill="")
````

```{r loading qogdata}
qog_en <- read_dta('Data/qog_std_ts_jan21.dta') 

```

```{r regions_oecs}
regions_oecs <- read_csv('02-Source/REGION_SOCIAL_03102021202926451.csv') 
```

## Something merged??

